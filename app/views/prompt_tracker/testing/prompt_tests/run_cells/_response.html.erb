<td data-column="run_response">
  <% if run.llm_response&.response_text.present? %>
    <% response_id = "response-#{run.id}" %>
    <div class="expandable-text">
      <div id="<%= response_id %>-truncated">
        <small class="text-muted"><%= truncate(run.llm_response.response_text, length: 100) %></small>
        <% if run.llm_response.response_text.length > 100 %>
          <button class="btn btn-link btn-sm p-0 ms-1" type="button" onclick="document.getElementById('<%= response_id %>-truncated').style.display='none'; document.getElementById('<%= response_id %>-full').style.display='block';">
            <i class="bi bi-chevron-down"></i>
          </button>
        <% end %>
      </div>
      <div id="<%= response_id %>-full" style="display: none;">
        <small class="text-muted" style="white-space: pre-wrap;"><%= run.llm_response.response_text %></small>
        <button class="btn btn-link btn-sm p-0 ms-1" type="button" onclick="document.getElementById('<%= response_id %>-full').style.display='none'; document.getElementById('<%= response_id %>-truncated').style.display='block';">
          <i class="bi bi-chevron-up"></i>
        </button>
      </div>
    </div>
  <% else %>
    <span class="text-muted">-</span>
  <% end %>
</td>
